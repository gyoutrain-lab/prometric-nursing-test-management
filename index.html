<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nursing Prometric Test Hub</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background: #fff url('assets/water-drop-bg.jpg') bottom no-repeat;
    background-size: cover;
    color:#000;
  }
  .container { max-width: 480px; margin:auto; padding:10px; }
  h1 { font-size:1.5rem; text-align:center; color:#000; margin-top:1rem; }
  h2 { font-size:1.2rem; text-align:center; color:#333; margin-top:0.5rem; }
  .modules { display:flex; flex-direction:column; gap:10px; margin-top:1rem; }
  button { padding:12px; font-size:1rem; border:none; border-radius:8px; cursor:pointer; }
  .active { background-color:#003366; color:#fff; }
  .locked { background-color:#ffcccc; color:#800000; cursor: not-allowed; }
  .footer { text-align:center; margin-top:2rem; font-size:0.85rem; }
  img.icon { display:block; margin:10px auto; width:80px; height:auto; }
</style>
</head>
<body>
<div class="container">
  <img src="assets/icon17 (1).jpg" alt="Icon" class="icon">
  <h1>ðŸ©º Nursing Prometric Test Hub</h1>
  <h2>Select Your Test Module</h2>

  <div class="modules">
    <button class="active" onclick="openModule('pediatric')">Pediatric Nursing</button>
    <button class="locked" onclick="unlockModule('pharmacology')">Pharmacology</button>
    <button class="locked" onclick="unlockModule('behavioral')">Behavioral / Ethics</button>
    <button class="locked" onclick="unlockModule('criticalcare')">Critical Care</button>
    <button class="locked" onclick="unlockModule('maternity')">Maternity & Obstetric</button>
    <button class="locked" onclick="unlockModule('fundamental')">Fundamental Nursing</button>
    <button class="locked" onclick="unlockModule('medicalsurgical')">Medical-Surgical</button>
  </div>

  <div class="footer">
    <p>Nursing Excellence and Career Begin Here</p>
    <p>Connect with us: <a href="https://wa.me/6285399652487" target="_blank">WhatsApp</a> | 
    <a href="https://web.facebook.com/gyouskill" target="_blank">Facebook</a></p>
    <p>Â© 2025 GyouTrain Lab</p>
  </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbw9c1P3M2Mfgeky8Qrjmf80IND5yx5Ur_YLWiT2xhvo0WglKVT5OQbLfn0JuvdNwTSG/exec";

// Map modules to URLs (Pediatric is default free)
const MODULE_URLS = {
  pediatric: "https://gyoutrain-lab.github.io/nursing-prometric-test-pediatric/",
  pharmacology: "",
  behavioral: "",
  criticalcare: "",
  maternity: "",
  fundamental: "",
  medicalsurgical: ""
};

async function unlockModule(moduleName) {
  const waNumber = prompt("Enter your WhatsApp number (include +):");
  if(!waNumber) return;

  // Notify operator/admin via WhatsApp
  const msg = `Hello, I want to unlock the "${moduleName.charAt(0).toUpperCase() + moduleName.slice(1)}" nursing test module.`;
  window.open(`https://wa.me/6285399652487?text=${encodeURIComponent(msg)}`, '_blank');

  // Show instructions to user
  alert(`If you agree, please transfer IDR 200k via OVO to +6285399652487.
After payment, send a message with your OVO confirmation here, and youâ€™ll receive your unlock code.
Press OK once payment is completed.`);

  // Ask user to enter code from operator
  const code = prompt("Enter the unlock code you received via WhatsApp after payment:");
  if(!code) return;

  try {
    const response = await fetch(API_URL);
    const codesData = await response.json();
    if(codesData.codes && codesData.codes.includes(code)) {
      // Unlock all modules
      document.querySelectorAll('.modules button').forEach(btn=>{
        btn.classList.remove('locked');
        btn.classList.add('active');
      });
      alert("All modules are now unlocked!");
    } else {
      alert("Invalid code. Please check and try again.");
    }
  } catch(err) {
    console.error(err);
    alert("Error checking code. Try again later.");
  }
}

function openModule(moduleName) {
  const url = MODULE_URLS[moduleName];
  if(url) window.open(url,'_blank');
  else alert("Module URL not available.");
}
</script>
</body>
</html>

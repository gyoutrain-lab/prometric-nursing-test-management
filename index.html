<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nursing Test Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: Arial, sans-serif;
      background-color: #f2f3f4;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      background-color: #4a90e2;
      color: white;
      text-align: center;
      padding: 1rem 0;
    }

    header img {
      width: 80px;
      height: auto;
      margin-bottom: 0.5rem;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .dashboard {
      width: 90%;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2rem;
    }

    .dashboard button {
      padding: 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #4a90e2;
      color: white;
      transition: background 0.3s;
    }

    .dashboard button:hover {
      background-color: #357ABD;
    }

    footer {
      margin-top: auto;
      padding: 1rem;
      font-size: 0.9rem;
      color: #777;
      text-align: center;
    }

    @media (max-width: 480px) {
      h1 { font-size: 1.2rem; }
      .dashboard button { font-size: 0.9rem; padding: 0.8rem; }
      header img { width: 60px; }
    }
  </style>
</head>
<body>

  <header>
    <img src="assets/icon17 (1).jpg" alt="Icon">
    <h1>Nursing Test Dashboard</h1>
  </header>

  <div class="dashboard">
    <!-- Always accessible modules -->
    <button onclick="window.location.href='https://gyoutrain-lab.github.io/nursing-prometric-test-pediatric/'">Pediatric</button>
    <button onclick="window.location.href='https://gyoutrain-lab.github.io/nursing-prometric-test-pharmacology/'">Pharmacology</button>
    <button onclick="window.location.href='https://gyoutrain-lab.github.io/nursing-prometric-test/'">Fundamental</button>

    <!-- Locked modules -->
    <button onclick="unlockModule('behavioral')">Behavioral</button>
    <button onclick="unlockModule('criticalcare')">Critical Care</button>
    <button onclick="unlockModule('maternity')">Maternity</button>
    <button onclick="unlockModule('medicalsurgical')">Medical Surgical</button>
  </div>

  <footer>
    &copy; 2025 Gyoutrain Lab
  </footer>

  <script>
    const businessWA = "+6285399652487"; // Your business WhatsApp

    // Store unlocked modules locally
    let unlockedModules = JSON.parse(localStorage.getItem('unlockedModules') || "{}");

    // Check if module already unlocked
    function unlockModule(moduleName) {
      if (unlockedModules[moduleName]) {
        // Already unlocked → redirect
        redirectToModule(moduleName);
        return;
      }

      // Ask user to send WhatsApp to unlock
      const confirmUnlock = confirm(`To access the "${moduleName}" module, please contact WhatsApp to unlock. Click OK to open WhatsApp message.`);
      if (!confirmUnlock) return;

      const waMessage = encodeURIComponent(`Hello, I want to unlock the "${moduleName}" nursing test.`);
      window.open(`https://wa.me/${businessWA}?text=${waMessage}`, "_blank");

      // Prompt user to enter unlock code received via WhatsApp/OVO
      const code = prompt("Enter the unlock code you received via WhatsApp/OVO:");
      if (!code) return alert("No code entered. Module remains locked.");

      // Verify the code (simple example: here we just check if code is "1234" for demo)
      if (code === "1234") {
        unlockedModules[moduleName] = true;
        localStorage.setItem('unlockedModules', JSON.stringify(unlockedModules));
        alert("✅ Module unlocked! You can now access it.");
        redirectToModule(moduleName);
      } else {
        alert("❌ Invalid code. Please contact WhatsApp to get the correct unlock code.");
      }
    }

    function redirectToModule(moduleName) {
      switch(moduleName) {
        case 'behavioral':
          window.location.href = 'https://gyoutrain-lab.github.io/nursing-prometric-test-eticabehabior/';
          break;
        case 'criticalcare':
          window.location.href = 'https://gyoutrain-lab.github.io/nursing-prometric-test-criticalcare2/';
          break;
        case 'maternity':
          window.location.href = 'https://gyoutrain-lab.github.io/nursing-prometric-test-maternityobstetric/';
          break;
        case 'medicalsurgical':
          window.location.href = 'https://gyoutrain-lab.github.io/nursing-prometric-test-medical-surgical/';
          break;
        default:
          alert("Module not found.");
      }
    }
  </script>

</body>
</html>
